{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "PostgreSQL": "User ID=myuser;Password=password;Host=localhost;Port=32770;Database=DDD;Connection Lifetime=0;",
    "Redis": "127.0.0.1:32772"
  },
  "RabbitMQ": {
    "HostName": "localhost",
    "Port": 5672,
    "UserName": "admin",
    "Password": "admin123",
    "VirtualHost": "/",
    "ExchangeName": "domain_events",
    "AnalyticsQueueName": "analytics_events",
    "AnalyticsRoutingKey": "analytics.*",
    "EnableRetry": true,
    "RetryCount": 3,
    "RetryDelayMs": 1000,
    "RequeueOnError": true,
    "DeadLetterExchange": true,
    "DeadLetterQueueName": "dead_letter_queue"
  },
  "Elasticsearch": {
    "Url": "http://elasticsearch:9200",
    "DefaultIndex": "MainApi-events",
    "Username": "",
    "Password": ""
  },
  "Keycloak": {
    "Authority": "http://localhost:8080/realms/ddd-realm",
    "Audience": "ddd-api",
    "RequireHttpsMetadata": false,
    "ValidateIssuer": true,
    "ValidateAudience": true,
    "ValidateLifetime": true,
    "ClockSkew": "00:05:00"
  },
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.Elasticsearch" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": { "Microsoft": "Warning", "System": "Warning" }
    },
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId" ],
    "Properties": { "Application": "MainApi", "Environment": "Development" },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "Elasticsearch",
        "Args": {
          "NodeUris": "http://elasticsearch:9200",
          "IndexFormat": "mainapi-logs-{0:yyyy.MM.dd}",
          "TemplateName": "mainapi-logs",
          "AutoRegisterTemplate": true,
          "AutoRegisterTemplateVersion": "ESv7",
          "NumberOfShards": 1,
          "NumberOfReplicas": 0,
          "EmitEventFailure": "WriteToSelfLog",
          "DeadLetterIndexName": "deadletter-mainapi-logs",
          "Period": 2,                       
          "BatchPostingLimit": 50,        
          "ConnectionTimeout": 5             
        }
      }
    ]
  }
}
